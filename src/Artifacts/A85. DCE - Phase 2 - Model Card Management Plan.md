# Artifact A85: DCE - Phase 2 - Model Card Management Plan
# Date Created: C17
# Author: AI Model & Curator

- **Key/Value for A0:**
- **Description:** A plan for a feature allowing users to create, manage, and select from multiple "model cards," each defining the configuration for a different LLM (e.g., local endpoint, context size).
- **Tags:** feature plan, phase 2, settings, llm, configuration, model management

## 1. Overview & Goal

As the DCE project moves towards direct API integration, users will need a flexible way to manage connections to different Large Language Models (LLMs). The current settings plan only accounts for a single local API URL. The goal of this feature is to replace that with a more robust "Model Card" system. This will allow users to create, save, and switch between multiple configurations for different models, whether they are hosted locally or are cloud-based APIs.

## 2. User Stories

| ID | User Story | Acceptance Criteria |
|---|---|---|
| P2-MC-01 | **Create a Model Card** | As a user, I want to create a new "Model Card" in the settings panel to define the configuration for an LLM I want to use. | - A "Create New Model Card" button exists in the settings panel. <br> - Clicking it opens a form with fields for: Display Name, API Endpoint URL, Context Window Size (in tokens), and potentially other model-specific parameters. <br> - Saving the form creates and persists a new model card. |
| P2-MC-02 | **Select Active Model** | As a user, I want to select one of my saved model cards as the active model for the extension, so that API calls are sent to the correct endpoint. | - The settings panel displays a list or dropdown of all saved model cards. <br> - I can select one model card as the "active" one. <br> - A default, non-deletable "AI Studio (Manual)" card will always be present. |
| P2-MC-03 | **Edit a Model Card** | As a user, I want to edit the details of a model card I previously created, so I can update an API endpoint or change its parameters. | - Each saved model card has an "Edit" button. <br> - Clicking it opens the same form used for creation, pre-filled with the card's current data. |
| P2-MC-04 | **Delete a Model Card** | As a user, I want to delete a model card I no longer need, so I can keep my configuration clean. | - Each saved model card has a "Delete" button. <br> - Deleting a card prompts for confirmation. |

## 3. Technical Implementation Plan

1.  **Data Structure (`pcpp.types.ts` or a new `settings.types.ts`):**
    *   Define a `ModelCard` interface:
        ```typescript
        interface ModelCard {
          id: string; // UUID
          displayName: string;
          apiEndpoint: string;
          contextWindowSize: number;
          // ... other potential fields like apiKeySecretName
        }
        ```
2.  **Backend (`settings.service.ts` - New or expanded):**
    *   A new service or an expansion of the existing history/selection service will be needed to manage model cards.
    *   It will use the VS Code `workspaceState` to store an array of `ModelCard` objects.
    *   It will expose methods for `getModelCards()`, `saveModelCard(card: ModelCard)`, `deleteModelCard(id: string)`, `getActiveModel()`, and `setActiveModel(id: string)`.

3.  **UI (`settings.view.tsx`):**
    *   The existing settings view will be overhauled.
    *   It will fetch and display a list of all saved model cards.
    *   It will include UI for selecting the active model (e.g., with radio buttons).
    *   It will have "Create New", "Edit", and "Delete" buttons that open a modal or a separate form view to manage the details of a `ModelCard`.

4.  **Integration with API-calling services:**
    *   Services that will eventually make API calls (like a future `LlmService`) will be designed to first query the `SettingsService` to get the active `ModelCard`.
    *   They will use the `apiEndpoint` and other parameters from the active card to construct their API requests. This decouples the calling logic from the specific model configuration.