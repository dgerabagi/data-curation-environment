# Artifact A106: DCE - vLLM Performance and Quantization Guide
# Date Created: C76
# Author: AI Model & Curator

- **Key/Value for A0:**
- **Description:** A guide explaining the performance warnings from the vLLM logs and detailing the various model quantization options available.
- **Tags:** guide, vllm, performance, quantization, llm

## 1. Overview & Goal

This document addresses your questions from Cycle 76 regarding the vLLM startup logs and the different model versions available. The goal is to clarify what the performance warnings mean and to explain the concept of model quantization, which is what the different file versions (Q2_K, Q4_K_M, etc.) represent.

## 2. Understanding the vLLM Startup Logs

The logs you provided contain several warnings and informational messages that are useful for performance tuning. Here's a breakdown:

-   **`Your GPU does not have native support for FP4 computation... Weight-only FP4 compression will be used leveraging the Marlin kernel.`**
    *   **Explanation:** Your NVIDIA RTX 3090 GPU (Ampere architecture, SM86) does not have specialized hardware (Tensor Cores) for 4-bit floating-point (FP4) math. Newer GPUs (Hopper architecture, SM90+) do. To compensate, vLLM is using a highly optimized software routine called the "Marlin kernel" to perform the 4-bit operations.
    *   **Impact:** You can still run 4-bit models, but it might not be as fast as on the latest hardware.

-   **`You are running Marlin kernel with bf16 on GPUs before SM90. You can consider change to fp16 to achieve better performance if possible.`**
    *   **Explanation:** This is a direct performance suggestion. Your GPU is using `bfloat16` (a data type good for training) for its computations. The Marlin kernel maintainers suggest that `float16` (`fp16`) is often faster for inference on your specific GPU architecture.
    *   **Action:** You could potentially get a performance boost by starting the server with an additional flag: `--dtype float16`.

-   **`mxfp4 quantization is not fully optimized yet.`**
    *   **Explanation:** The specific 4-bit format vLLM is using (`mxfp4`) is still considered experimental and may not be as fast as other, more mature quantization methods.

## 3. Model Quantization Explained

The list of model versions you provided (`Q3_K_S`, `Q4_0`, `Q8_0`, `F16`, etc.) refers to different **quantization levels**.

**Quantization** is the process of reducing the precision of the numbers (weights) used in a neural network. This makes the model file smaller and can make inference faster, but it comes at the cost of a small reduction in accuracy or "intelligence."

-   **`F16` (Float 16):** This is the unquantized, full-precision version. It offers the highest quality but has the largest file size and VRAM requirement.
-   **`Q8_0` (8-bit Quantized):** Each weight is stored as an 8-bit integer. This is roughly half the size of the F16 version with very little quality loss. A great balance for performance and quality.
-   **`Q4_K_M` (4-bit K-Quant Medium):** This is a very popular 4-bit quantization. It significantly reduces the model size, allowing very large models to run on consumer hardware. The quality is generally excellent for the size. The `_K` refers to the "K-quants" method, which is an improved quantization strategy. `_M` means "Medium."
-   **`Q2_K` (2-bit K-Quant):** An extreme level of quantization. The model is very small but the quality loss is significant. Often used for research or on very constrained devices.

### Which Version Did You Load?

The command you ran (`python -m vllm.entrypoints.openai.api_server --model "unsloth/gpt-oss-20b"`) loads the **default, unquantized `bfloat16` version** of the model from Hugging Face. vLLM then applies its own `mxfp4` quantization on-the-fly.

The list of `Q` files you found are typically associated with the **GGUF format**, which is used by other inference engines like `llama.cpp`. vLLM does not load GGUF files directly. It has its own supported quantization methods (like AWQ, GPTQ, and the experimental `mxfp4`) that it applies to the base model.

**In summary:** You are not using one of the GGUF files from your list. You are using the base model, and vLLM is applying its own 4-bit quantization to it. The warnings are helpful tips for potentially improving performance on your specific hardware.