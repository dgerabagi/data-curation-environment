# Artifact A60: DCE - Phase 2 - Cycle 0 Onboarding Experience
# Date Created: C139
# Author: AI Model & Curator
# Updated on: C142 (Add "Return to Cycle 0" navigation feature)

- **Key/Value for A0:**
- **Description:** Documents the plan for a special "Cycle 0" mode to guide new users in setting up their project by generating an initial set of planning documents.
- **Tags:** feature plan, phase 2, onboarding, first-run, project setup

## 1. Vision & Goal

The Parallel Co-Pilot Panel (PCPP) is a powerful tool for iterative, AI-assisted development, but its effectiveness relies on a structured set of planning and documentation artifacts. For a new user starting a project from scratch, the initial setup can be a significant hurdle.

The goal of the "Cycle 0" onboarding experience is to guide the user through this initial setup. By capturing their high-level project scope, the extension will leverage a set of best-practice document templates to generate a prompt that instructs an AI to create a starter pack of planning artifacts for the user's new project. This automates the project bootstrapping process and introduces the user to the artifact-driven workflow.

## 2. User Flow

1.  **Detection:** The extension detects a "fresh workspace" by confirming the absence of `src/Artifacts/A0. DCE Master Artifact List.md`.
2.  **Cycle 0 UI:** The PCPP loads into a special "Cycle 0" view. This view is simplified, removing the cycle navigator and response tabs. It presents the user with an introduction and a single large text area.
3.  **User Input:** The user is prompted to describe their project's vision and goals in the "Project Scope" text area.
4.  **Generate Prompt & Artifacts:** The user clicks a button, e.g., "Generate Initial Artifacts Prompt".
5.  **Backend Process:**
    *   The backend `PromptService` constructs a unique `prompt.md` file using the user's scope and a set of bundled template artifacts.
    *   Crucially, it also creates the `src/Artifacts` directory if it doesn't exist, and then creates an empty `src/Artifacts/A0. DCE Master Artifact List.md`.
    *   It then notifies the frontend that the process is complete.
6.  **Transition to Cycle 1:** Upon notification, the frontend automatically reloads its state. Since `A0` now exists, the `HistoryService` returns Cycle 1, and the UI transitions to the main PCPP interface, ready for the user's first real cycle.
7.  **User Action:** The user takes the generated `prompt.md` and uses it with their preferred LLM.
8.  **First Iteration:** The user pastes the AI's response (which should contain the new planning artifacts) back into the PCPP's "Cycle 1" tab, and the standard iterative workflow begins.
9.  **(C142) Return to Cycle 0:** If the user is on Cycle 1, they can click the "previous cycle" (`<`) button. This will navigate them back to the Cycle 0 onboarding view, allowing them to modify their initial project scope and regenerate the prompt.

## 3. Technical Implementation

-   **Detection (`history.service.ts`):** The `getLatestCycle` method will check for the existence of `src/Artifacts/A0. DCE Master Artifact List.md`. If it is missing, it will return a special `PcppCycle` object with `cycleId: 0`.
-   **Frontend (`view.tsx`, `OnboardingView.tsx`):**
    *   The main `view.tsx` will conditionally render a new `<OnboardingView />` component if the loaded cycle data has `cycleId === 0`.
    *   `OnboardingView.tsx` will contain the introductory text and the project scope `<textarea>`.
    *   The "Generate" button in this view will send `RequestCreateCycle0Prompt` with the project scope.
    *   The `handleCycleChange` function will be updated to allow navigation from Cycle 1 back to Cycle 0.
-   **Backend (`prompt.service.ts`):**
    *   A method `generateCycle0Prompt` will be created.
    *   It will construct paths to its own bundled template artifacts using the `extensionUri` provided at initialization.
    *   It will create the `src/Artifacts` directory before writing the new `A0` file to prevent errors.
-   **IPC (`channels.enum.ts`):**
    *   A `ServerToClientChannel.Cycle0PromptGenerated` channel will signal the frontend to trigger a state reload.