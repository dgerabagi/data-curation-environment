# Artifact A80: DCE - Settings Panel Plan
# Date Created: C6
# Author: AI Model & Curator
# Updated on: C17 (Reflect removal of Context Chooser icon)

- **Key/Value for A0:**
- **Description:** A plan for a new settings panel, accessible via a command, to house changelogs, settings, and other informational content.
- **Tags:** feature plan, settings, ui, ux, changelog

## 1. Overview & Goal

As the Data Curation Environment (DCE) grows in features, users will need a centralized location to manage settings, view changelogs, and access help documentation. The goal of this feature is to create a dedicated "Settings & Help" panel that serves as this central hub.

**Status (C17):** Implemented. The panel is now functional and opens as a `WebviewPanel` in the main editor area. The entry point icon from the Context Chooser view has been removed, and the panel is now accessed via the `DCE: Open Settings & Help` command.

## 2. User Stories

| ID | User Story | Acceptance Criteria |
|---|---|---|
| P2-SET-01 | **Access Help and Settings** | As a user, I want to execute a command to open a dedicated panel, so I can access settings and information about the extension. | - A command `DCE: Open Settings & Help` is available in the command palette. <br> - Executing it opens a new `WebviewPanel` in the main editor area, titled "DCE Settings & Help". |
| P2-SET-02 | **View Changelog** | As a user, I want to view a changelog within the settings panel, so I can see what has changed in the latest version of the extension. | - The settings panel has a "Changelog" tab or collapsible section. <br> - This section displays the content of a `CHANGELOG.md` file from the workspace root, rendered as formatted Markdown. |
| P2-SET-03 | **View About/README** | As a user, I want to view an "About" page that explains the purpose and workflow of the DCE, so I can get help on how to use it. | - The settings panel has an "About" tab or collapsible section. <br> - This section displays the content of the `README.md` file from the workspace root. |
| P2-SET-04 | **Manage Settings** | As a user, I want to manage extension settings from this panel, so I can configure features to my preference. | - The settings panel has a "Settings" section. <br> - It provides UI controls for managing settings, such as a field for a local API URL and a toggle for "Free Mode" vs. "Local Mode". |

## 3. Technical Implementation Plan

1.  **Command Registration:**
    *   **`package.json`:** The `view/title` menu contribution for the `viewType.sidebar.contextChooser` has been removed. A new command `dce.openSettingsPanel` is registered for the command palette.
    *   **`commands.ts`:** The command executes an internal `dce.showSettingsPanel` command.
    *   **`extension.ts`:** The handler for `dce.showSettingsPanel` creates and manages a singleton `WebviewPanel`.

2.  **New Settings Webview (`settings.view/`):**
    *   `view.tsx` renders a UI with collapsible sections for "Changelog", "About", and "Settings".
    *   On mount, it sends IPC messages to the backend to request the content for the `CHANGELOG.md` and `README.md` files.
    *   The "Settings" section contains placeholder UI elements for future functionality.

3.  **Backend Logic (`file-operation.service.ts`):**
    *   The `handleChangelogContentRequest` and `handleReadmeContentRequest` methods read the respective files from the workspace root and send their content back to the settings webview.
    *   **IPC:** The existing channels (`RequestChangelogContent`, `SendChangelogContent`, etc.) facilitate this communication.