# Artifact A80: DCE - Settings Panel Plan
# Date Created: C6
# Author: AI Model & Curator
# Updated on: C16 (Adopt WebviewPanel strategy)

- **Key/Value for A0:**
- **Description:** A plan for a new settings panel, accessible via an icon, to house changelogs, settings, and other informational content.
- **Tags:** feature plan, settings, ui, ux, changelog

## 1. Overview & Goal

As the Data Curation Environment (DCE) grows in features, users will need a centralized location to manage settings, view changelogs, and access help documentation. The goal of this feature is to create a dedicated "Settings & Help" panel, accessible via a new icon in the main Context Chooser toolbar, that serves as this central hub.

**Status (C16):** In Progress. The implementation strategy has been updated to use a `WebviewPanel`, which opens in the main editor area, ensuring a more robust and user-friendly experience.

## 2. User Stories

| ID | User Story | Acceptance Criteria |
|---|---|---|
| P2-SET-01 | **Access Help and Settings** | As a user, I want to click an icon in the main Data Curation toolbar to open a dedicated panel, so I can access settings and information about the extension. | - A settings/help icon is present in the main header of the Data Curation (Context Chooser) view. <br> - Clicking it executes a command that opens a new `WebviewPanel` in the main editor area, titled "DCE Settings & Help". |
| P2-SET-02 | **View Changelog** | As a user, I want to view a changelog within the settings panel, so I can see what has changed in the latest version of the extension. | - The settings panel has a "Changelog" tab or collapsible section. <br> - This section displays the content of a `CHANGELOG.md` file from the workspace root, rendered as formatted Markdown. |
| P2-SET-03 | **View About/README** | As a user, I want to view an "About" page that explains the purpose and workflow of the DCE, so I can get help on how to use it. | - The settings panel has an "About" tab or collapsible section. <br> - This section displays the content of the `README.md` file from the workspace root. |
| P2-SET-04 | **Manage Settings** | As a user, I want to manage extension settings from this panel, so I can configure features to my preference. | - The settings panel has a "Settings" section. <br> - It provides UI controls for managing settings, such as a field for a local API URL and a toggle for "Free Mode" vs. "Local Mode". |

## 3. Technical Implementation Plan

1.  **New Command & Icon:**
    *   **UI (`package.json`):** A new icon button will be added to the `view/title` menu contribution for the `viewType.sidebar.contextChooser`. This places the button in the header of the file tree view. It will trigger the `dce.openSettingsPanel` command.
    *   **Command (`commands.ts`):** The command executes an internal `dce.showSettingsPanel` command to follow our established architectural pattern.
    *   **`extension.ts`:** The handler for `dce.showSettingsPanel` will create and manage a singleton `WebviewPanel`, ensuring only one settings panel can exist. This logic will be nearly identical to the `createOrShowParallelCopilotPanel` function.

2.  **New Settings Webview (`settings.view/`):**
    *   `view.tsx` will render a UI with collapsible sections for "Changelog", "About", and "Settings".
    *   On mount, it will send IPC messages to the backend to request the content for the `CHANGELOG.md` and `README.md` files.
    *   The "Settings" section will contain placeholder UI elements (input field, radio buttons) for future functionality.

3.  **Backend Logic (`file-operation.service.ts`):**
    *   The existing handlers (`handleChangelogContentRequest`, `handleReadmeContentRequest`) will be used to read the respective files from the workspace root and send their content back to the settings webview.
    *   **IPC:** The existing channels (`RequestChangelogContent`, `SendChangelogContent`, etc.) will facilitate this communication.