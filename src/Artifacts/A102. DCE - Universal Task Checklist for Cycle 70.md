# Artifact A102: DCE - Universal Task Checklist for Cycle 70
# Date Created: C70
# Author: AI Model & Curator

## 1. Purpose

This artifact provides a structured checklist for tracking the development tasks, feedback, and bugs identified in Cycle 70. It organizes the work by the group of files involved in each task to help plan and prioritize development, especially where context size (token count) is a constraint.

---

## Task List for Cycle 70+

## T-1: Fix Core Workflow & Generation Logic
- **Files Involved:**
    - `src/backend/services/prompt.service.ts`
    - `src/backend/services/llm.service.ts`
    - `src/backend/services/history.service.ts`
    - `src/client/views/parallel-copilot.view/on-message.ts`
- **Total Tokens:** ~15,000
- **More than one cycle?** No
- **Status:** To Do

- [ ] **Task (T-ID: 1.1):** Update `prompt.service.ts` to ensure `prompt.md` is generated and saved to disk *before* the API request is sent in the automated "Demo Mode" workflow.
- [ ] **Task (T-ID: 1.2):** Fully implement the `stopGeneration` logic in `llm.service.ts` using an `AbortController` to make the "Stop" button functional.
- [ ] **Task (T-ID: 1.3):** Fully implement the single-response regeneration logic in `llm.service.ts` and `history.service.ts` to make the "Re-generate" buttons functional.

### Verification Steps
1.  Enable "Demo Mode" and start a new project.
2.  Click "Generate Initial Responses".
3.  **Expected:** A `prompt.md` file should appear in the workspace root *before* the generation progress UI appears.
4.  While responses are generating, click the "Stop" button for one of them.
5.  **Expected:** The generation for that specific response should cease.
6.  Once generation is complete, go to the PCPP, hover over a response tab, and click the "Refresh" icon.
7.  **Expected:** A new response should be generated for that tab only, and the UI should show a loading indicator during the process.

## T-2: Implement UI Enhancements & Fixes
- **Files Involved:**
    - `src/client/views/parallel-copilot.view/components/GenerationProgressDisplay.tsx`
    - `src/client/views/parallel-copilot.view/view.tsx`
    - `src/client/views/parallel-copilot.view/view.scss`
- **Total Tokens:** ~18,700
- **More than one cycle?** No
- **Status:** To Do

- [ ] **Task (T-ID: 2.1):** In `GenerationProgressDisplay.tsx`, update the token count display format to `thinking + response = total / max`.
- [ ] **Task (T-ID: 2.2):** Add a class to the "Unused" token count text and style it with the correct blue color in `view.scss`.
- [ ] **Task (T-ID: 2.3):** Update the title in `GenerationProgressDisplay.tsx` to change from "Generating Responses..." to "Generation Complete" when appropriate.
- [ ] **Task (T-ID: 2.4):** Add a "Return to Generation Progress" button in the main `view.tsx` that is visible only in demo mode when a generation is active.
- [ ] **Task (T-ID: 2.5):** (Stretch Goal) Investigate how to reflect a response selection from the PCPP back in the Generation Progress UI if the user navigates back to it.

### Verification Steps
1.  Start a response generation in "Demo Mode".
2.  **Expected:** The token count for each response should display in the format `1k + 5k = 6k / 16.4k tk`.
3.  **Expected:** The "Unused: xxx tk" text should be colored blue.
4.  Once generation is complete, navigate to the PCPP.
5.  **Expected:** A button to "Return to Generation Progress" should be visible. Clicking it should take you back to the progress screen.
6.  **Expected:** The title on the progress screen should now read "Generation Complete".