# Artifact A69: DCE - Animated UI Workflow Guide
# Date Created: C169
# Author: AI Model & Curator
# Updated on: C181 (Incorporate detailed onboarding and prompt.md workflow steps)

## 1. Overview & Goal

The Parallel Co-Pilot Panel (PCPP) has a powerful, multi-step workflow that may not be immediately obvious to new users. The goal of this feature is to implement a guided experience using subtle UI animations. These animations will highlight the next logical action the user should take, gently guiding them through the process from project creation to generating the next cycle's prompt.

## 2. User Story

| ID | User Story | Acceptance Criteria |
|---|---|---|
| P2-WF-01 | **Guided Workflow** | As a new user, I want the UI to visually guide me through the steps of a development cycle, so I can learn the workflow intuitively. | - After a specific action is completed, the UI element for the next logical action is highlighted with a subtle animation (e.g., a pulsing blue glow). |

## 3. The Animated Workflow Sequence (Cycle 6 Revision)

The highlighting will follow this specific sequence of user actions:

### Onboarding / Cycle 0
1.  **Start (No Workspace):** User opens VS Code with no folder open.
    *   **Highlight:** The **DCE icon** in the Activity Bar pulses.

2.  **Open PCPP (Welcome View):** User clicks the DCE icon, opening the PCPP to the "Welcome" / "Onboarding" view.
    *   **Highlight:** The **Project Scope `textarea`** pulses.

3.  **Input Project Scope:** User types their project plan into the `textarea`.
    *   **Highlight:** The **`Generate Initial Artifacts Prompt`** button pulses.

4.  **Generate `prompt.md`:** User clicks the button. `prompt.md` is created. The view transitions to Cycle 1.
    *   **Highlight (Future):** The `prompt.md` file in the native File Explorer would pulse. (This is a potential future feature requiring deeper VS Code API integration). For now, we will auto-open it.
    *   **Auto-Action:** The `prompt.md` file is automatically opened in the editor.
    *   **Highlight:** The **`Resp 1`** tab in the PCPP pulses.

### Main Loop (Cycle 1+)
5.  **Paste Responses:** The user takes the `prompt.md` content, gets responses from an LLM, and pastes them into the response tabs.
    *   **Highlight:** The highlight moves sequentially from **`Resp 1`** to **`Resp 2`**, etc., as each `textarea` is filled.
    *   **Trigger:** Once content is present in all available response tabs, the highlight moves to the next step.

6.  **Parse Responses:**
    *   **Highlight:** The **`Parse All`** button pulses.

7.  **Sort Responses:** User clicks `Parse All`.
    *   **Highlight:** If `isSortedByTokens` is false, the **`Sort`** button pulses. If it's already sorted, this step is skipped.

8.  **Select a Response:** User reviews the responses.
    *   **Highlight:** The **`Select This Response`** button on each tab pulses.

9.  **Create Baseline:** User clicks `Select This Response`.
    *   **Highlight:** The **`Baseline (Commit)`** button pulses.

10. **Select Files for Acceptance:** User clicks `Baseline (Commit)`.
    *   **Highlight:** The "Associated Files" list panel and the **`Select All`** button within it pulse.

11. **Accept Changes:** User checks one or more files.
    *   **Highlight:** The **`Accept Selected`** button pulses.

12. **Write Context:** User clicks `Accept Selected`.
    *   **Highlight:** The **"Cycle Context"** `textarea` pulses.

13. **Write Title:** User types into the "Cycle Context" `textarea`.
    *   **Highlight:** The **"Cycle Title"** input field pulses.

14. **Generate Next Prompt:** User types into the "Cycle Title" input field.
    *   **Highlight:** The **`Generate prompt.md`** button pulses.

15. **Create New Cycle:** User clicks `Generate prompt.md`.
    *   **Highlight:** The **`[ + ]` (New Cycle)** button pulses, completing the loop.

## 4. Technical Implementation Plan

1.  **CSS Animations (`view.scss`):**
    *   Create a keyframe animation (e.g., `pulsing-glow`) that animates a `box-shadow` or `outline` property.
    *   Create a CSS class (`.workflow-highlight`) that applies this animation.

2.  **State Management (`view.tsx`):**
    *   A state variable will track the current step in the workflow: `const [workflowStep, setWorkflowStep] = useState<string>('start');`.
    *   The state values will correspond to the sequence above (e.g., `'awaitingProjectScope'`, `'awaitingResponsePaste_1'`, `'awaitingParse'`).

3.  **Conditional Class Application (`view.tsx`, `OnboardingView.tsx`):**
    *   Each UI element in the sequence will have its `className` updated to be conditional based on the `workflowStep` state.

4.  **Logic (`useEffect` hooks in `view.tsx`):**
    *   A series of `useEffect` hooks will monitor user actions (pasting content, clicking buttons, typing in fields) to update the `workflowStep` state accordingly. The logic will be made robust to handle the transitions reliably.