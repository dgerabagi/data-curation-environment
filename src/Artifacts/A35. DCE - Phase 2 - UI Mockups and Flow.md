# Artifact A35: DCE - Phase 2 - UI Mockups and Flow
# Date Created: C69
# Author: AI Model
# Updated on: C91 (Add global parse toggle and Associated Files list)

## 1. Overview

This document describes the user interface (UI) and interaction flow for the Parallel Co-Pilot Panel. The design is centered around a two-stage workflow: **Input**, followed by a global **Parse** that transforms the entire panel into a **Review & Act** mode. The UI now includes an "Associated Files" list for quick validation.

## 2. UI Mockup (Textual Description)

### 2.1. Stage 1: Raw Input View

This is the initial state of the panel.

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: Generate Prompt, [ Parse All ], Settings, etc.]       |
|-------------------------------------------------------------------------------------|
| [v] Cycle Info & Context                                                            |
| |-----------------------------------------------------------------------------------|
| | Cycle: [ < ] [ C91 ] [ > ]  [ Cycle Title Input: global parse toggle... ]         |
| |-----------------------------------------------------------------------------------|
| | [Cycle Context (Permanent notes)]          [Ephemeral Context (Temp logs)]        |
| | +----------------------------------------+ +------------------------------------+ |
| | | Multi-line text area...                | | Multi-line text area...            | |
| | +----------------------------------------+ +------------------------------------+ |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space ]                      |
| |                                                                                 | |
| | +-----------------------------------------------------------------------------+ | |
| | | <textarea>                                                                  | | |
| | | I've analyzed your feedback...                                                | | |
| | | ...                                                                         | | |
| | | <src/main.ts>...</src/main.ts>                                                  | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.2. Stage 2: Parsed View

After clicking `[ Parse All ]`, all tabs transform simultaneously.

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: Generate Prompt, [ Un-Parse All ], Settings, etc.]    |
|-------------------------------------------------------------------------------------|
| [v] CYCLE & CONTEXT                                                                 |
| | ... (content is the same as above, but may be collapsed) ...                    | |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space, scrollable ]          |
| |                                                                                 | |
| | [v] SUMMARY & PLAN                                                              | |
| | |-----------------------------------------------------------------------------| | |
| | | > I've analyzed your feedback...                                            | | |
| |                                                                                 | |
| | [v] COURSE OF ACTION                                                            | |
| | |-----------------------------------------------------------------------------| | |
| | | 1.  **Documentation First:** I will update the artifacts.                   | | |
| |                                                                                 | |
| | [v] ASSOCIATED FILES                                                            | |
| | |-----------------------------------------------------------------------------| | |
| | | [✓] src/client/views/parallel-copilot.view/view.tsx [Diff]                  | | |
| | | [✗] src/client/views/a-new-file.ts [Create]                                 | | |
| |                                                                                 | |
| | [ FILE: src/client/views/parallel-copilot.view/view.tsx ] [Swap]                | |
| | +-----------------------------------------------------------------------------+ | |
| | | [ Read-only, syntax-highlighted code viewer... ]                            | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.1. UI Components Breakdown

1.  **Global Toolbar:**
    *   The `[ Parse All ]` / `[ Un-Parse All ]` button is now in the main header, controlling the state of all tabs at once.

2.  **Collapsible Sections:**
    *   The UI is organized into collapsible "accordion" sections.
    *   **`[v] CYCLE & CONTEXT`**: Contains the Cycle Navigator and context fields.
    *   **`[v] SUMMARY & PLAN`**: Renders the AI's summary as formatted Markdown.
    *   **`[v] COURSE OF ACTION`**: Renders the AI's plan as formatted Markdown.
    *   **`[v] ASSOCIATED FILES`**: A new section that lists all file paths detected in the response.

3.  **Associated Files List:**
    *   This new component provides a scannable list of all files the AI response intends to modify.
    *   **Status Icon:** A `✓` indicates the file exists in the workspace. A `✗` indicates it does not.
    *   **Actions:** Each file has a `[Diff]` button to compare changes. Non-existent files could have a `[Create]` button.

## 3. User Interaction Flow

1.  **Paste & Parse:** The user pastes raw AI responses into one or more tabs. They then click the global `[ Parse All ]` button.
2.  **Global UI Transform:** All tabs switch from their `textarea` view to the structured, parsed view.
3.  **Validation:** The user can immediately look at the "Associated Files" list in a tab to see if the AI has hallucinated any file paths (`✗`) or is correctly targeting existing ones (`✓`).
4.  **Review:** The user can collapse sections they don't need (e.g., the plan) to focus on the file list or the code blocks.
5.  **Act:** The user can click `[Diff]` on an associated file to review changes, or `[Swap]` on a file block to test the code.