# Artifact A35: DCE - Phase 2 - UI Mockups and Flow
# Date Created: C69
# Author: AI Model
# Updated on: C97 (Move response count to header, add collapsed cycle navigator)

## 1. Overview

This document describes the user interface (UI) and interaction flow for the Parallel Co-Pilot Panel. The design is centered around a two-stage workflow: **Input**, followed by a global **Parse** that transforms the entire panel into a **Review & Act** mode.

## 2. UI Mockup (Textual Description)

### 2.1. Main Header

The main header is now a single row containing all primary actions.

```
+-------------------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [ Gen prompt.md ] [ Parse All ] [ Settings ]   [ Number of Responses: [ 4 ] ] |
|-------------------------------------------------------------------------------------------------|
```

### 2.2. Cycle & Context Section

This section has two states: expanded (default) and collapsed.

**Expanded State:**
```
| [v] Cycle & Context                                                                 |
| |-----------------------------------------------------------------------------------|
| | Cycle: [ < ] [ C97 ] [ > ] [ + ] [ Cycle Title Input: ... ]                        |
| |-----------------------------------------------------------------------------------|
| | [Cycle Context (Permanent notes)]          [Ephemeral Context (Temp logs)]        |
| | +----------------------------------------+ +------------------------------------+ |
| | | Multi-line text area...                | | Multi-line text area...            | |
| | +----------------------------------------+ +------------------------------------+ |
```

**Collapsed State (New in C97):**
```
| [>] Cycle & Context         [ < ] [ C97 ] [ > ]                                     |
```
*   When collapsed, the header bar itself contains the essential navigation controls, allowing the user to change cycles without expanding the full section.

### 2.3. Parsed View

The two-pane layout for the parsed view remains the same.

```
|-------------------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ ... ]                                                |
|-------------------------------------------------------------------------------------------------|
| [ Left Pane (File List & Summary) ] | [ Right Pane (Diff Viewer / Content) ]                    |
| |-----------------------------------| |-------------------------------------------------------| |
| | [v] SUMMARY & PLAN                | | [ Diff for: src/client/views/view.tsx ]               | |
| | | Rendered Markdown...            | | +---------------------------------------------------+ | |
| |                                   | | | [ DiffViewer Component showing changes... ]       | | |
| | [v] ASSOCIATED FILES (Clickable)  | | +---------------------------------------------------+ | |
| | |-------------------------------| |                                                       | |
| | | [✓] src/client/views/view.tsx | |                                                       | |
| | | [✗] src/client/new-file.ts    | |                                                       | |
| |                                   | |                                                       | |
+-------------------------------------------------------------------------------------------------+```

## 3. User Interaction Flow

1.  **Load & Parse:** User loads the panel and clicks "Parse All". The UI transforms into the two-pane layout. The right pane is empty.
2.  **Select for Diff:** The user clicks on a file with a `✓` in the "Associated Files" list (left pane).
    *   **Action:** The frontend sends a `RequestFileContent` message to the backend with the file's path.
    *   The backend reads the file from the workspace and sends its content back via `SendFileContent`.
    *   The frontend receives the original content. It already has the AI's proposed content from the parsed response.
    *   **UI Update:** The `DiffViewer` component is rendered in the **right pane**, showing a comparison of the two versions.
3.  **Navigate While Collapsed:** The user collapses the "Cycle & Context" section. They can still click the `<` and `>` buttons in the header to load previous/next cycles without re-expanding the panel.