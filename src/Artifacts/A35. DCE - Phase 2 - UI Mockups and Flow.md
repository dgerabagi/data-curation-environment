# Artifact A35: DCE - Phase 2 - UI Mockups and Flow
# Date Created: C69
# Author: AI Model
# Updated on: C92 (Add "New Cycle" button and clarify section collapse state)

## 1. Overview

This document describes the user interface (UI) and interaction flow for the Parallel Co-Pilot Panel. The design is centered around a two-stage workflow: **Input**, followed by a global **Parse** that transforms the entire panel into a **Review & Act** mode. The UI now includes an "Associated Files" list for quick validation and a "New Cycle" button for explicit history management.

## 2. UI Mockup (Textual Description)

### 2.1. Stage 1: Raw Input View

This is the initial state of the panel.

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: Generate Prompt, [ Parse All ], Settings, etc.]       |
|-------------------------------------------------------------------------------------|
| [v] Cycle Info & Context                                                            |
| |-----------------------------------------------------------------------------------|
| | Cycle: [ < ] [ C92 ] [ > ] [ + ] [ Cycle Title Input: persistence fix... ]         |
| |-----------------------------------------------------------------------------------|
| | [Cycle Context (Permanent notes)]          [Ephemeral Context (Temp logs)]        |
| | +----------------------------------------+ +------------------------------------+ |
| | | Multi-line text area...                | | Multi-line text area...            | |
| | +----------------------------------------+ +------------------------------------+ |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space ]                      |
| |                                                                                 | |
| | +-----------------------------------------------------------------------------+ | |
| | | <textarea>                                                                  | | |
| | | I've analyzed your feedback...                                                | | |
| | | ...                                                                         | | |
| | | <src/main.ts>...</src/main.ts>                                                  | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.2. Stage 2: Parsed View

After clicking `[ Parse All ]`, all tabs transform simultaneously.

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: Generate Prompt, [ Un-Parse All ], Settings, etc.]    |
|-------------------------------------------------------------------------------------|
| [v] CYCLE & CONTEXT                                                                 |
| | ... (content is the same as above, but may be collapsed) ...                    | |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space, scrollable ]          |
| |                                                                                 | |
| | [v] SUMMARY & PLAN                                                              | |
| | |-----------------------------------------------------------------------------| | |
| | | > I've analyzed your feedback...                                            | | |
| |                                                                                 | |
| | [v] COURSE OF ACTION                                                            | |
| | |-----------------------------------------------------------------------------| | |
| | | 1.  **Documentation First:** I will update the artifacts.                   | | |
| |                                                                                 | |
| | [v] ASSOCIATED FILES                                                            | |
| | |-----------------------------------------------------------------------------| | |
| | | [✓] src/client/views/parallel-copilot.view/view.tsx [Diff]                  | | |
| | | [✗] src/client/views/a-new-file.ts [Create]                                 | | |
| |                                                                                 | |
| | [ FILE: src/client/views/parallel-copilot.view/view.tsx ] [Swap]                | |
| | +-----------------------------------------------------------------------------+ | |
| | | [ Read-only, syntax-highlighted code viewer... ]                            | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.1. UI Components Breakdown

1.  **Cycle Navigator:**
    *   The navigator now includes a `[ + ]` (New Cycle) button. This is the primary way to advance to a new, empty cycle.
    *   The `[ > ]` (Next) button is disabled when the user is viewing the latest cycle.

2.  **Collapsible Sections:**
    *   Each collapsible section (`CYCLE & CONTEXT`, `SUMMARY & PLAN`, `COURSE OF ACTION`, etc.) will have its own independent open/closed state. The state for one section will not affect the others.

## 3. User Interaction Flow

1.  **Load:** On startup, the panel loads the data from the *latest* cycle in its history. The Cycle Navigator displays this cycle number, and the `[ > ]` button is disabled.
2.  **Work:** The user edits the cycle title, context, and response tabs. All changes are debounced and saved automatically to the current cycle's record in `dce_history.json`.
3.  **New Cycle:** When ready to start a new iteration, the user clicks the `[ + ]` button.
    *   **Action:** The cycle number increments. `maxCycle` and `currentCycle` are both updated.
    *   **UI Update:** The UI clears all fields (title, context, responses) for the new cycle.
    *   **Save:** A new, empty cycle object is created and saved to the history file. The `[ > ]` button remains disabled.
4.  **Review History:** The user can click the `[ < ]` button to navigate to past cycles, loading their saved state for review.