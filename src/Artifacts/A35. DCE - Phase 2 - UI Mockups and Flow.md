# Artifact A35: DCE - Phase 2 - UI Mockups and Flow
# Date Created: C69
# Author: AI Model
# Updated on: C132 (Add response-level controls and refine diff view)

## 1. Overview

This document describes the user interface (UI) and interaction flow for the Parallel Co-Pilot Panel. The design is centered around a two-stage workflow: **Input**, followed by a global **Parse** that transforms the entire panel into a **Review & Act** mode.

## 2. UI Mockup (Textual Description)

### 2.1. Main Header & Cycle Section
(No changes from C131)

### 2.2. Response Tabs
(No changes from C131)

### 2.3. Parsed View (Non-Diff Mode)

The parsed view uses a **resizable two-pane layout**. The left pane provides summary information and navigation. The right pane displays the code, now with its own header for accepting changes.

```
|-------------------------------------------------------------------------------------------------|
| [ Left Pane ]<--->[ Right Pane (Code Viewer) ]                                                 |
| |-------------||------------------------------------------------------------------------------| |
| | [v] ASSOCIATED FILES            | | [ ] Select this response [ Accept Selected Files ]               | |
| | |-------------------------------| |------------------------------------------------------------------| |
| | | [x] [✓] src/.../view.tsx      | | [ File: src/.../view.tsx ] [ View Diff ] [ Accept this file ]    | |
| | | [ ] [✗] src/.../new-file.ts   | | +------------------------------------------------------------------+ | |
| |                                   | | | [ Read-only editor with line numbers and syntax highlighting ] | | |
| | [v] THOUGHTS / RESPONSE           | | +------------------------------------------------------------------+ | |
| | | Rendered Markdown...            | |                                                                    | |
| |                                   | |                                                                    | |
| | [v] COURSE OF ACTION              | |                                                                    | |
| | | Rendered Markdown...            | |                                                                    | |
+-------------------------------------------------------------------------------------------------+
```
*   **File Checkboxes (`[x]`):** A checkbox now appears next to each file in the "Associated Files" list. This allows the user to stage individual files for a bulk "accept" operation.
*   **Response Header:** A new header bar appears above the code viewer.
    *   **`[ ] Select this response`:** A checkbox that checks or un-checks all files in the "Associated Files" list.
    *   **`[ Accept Selected Files ]`:** A button that replaces all checked workspace files with the versions from this AI response.
*   **Individual File Actions:** The "Swap" button is renamed to **"Accept this file"** for clarity.

### 2.4. Diff View

When the user clicks the "[ View Diff ]" button.

```
|-------------------------------------------------------------------------------------------------|
| [ Left Pane ]<--->[ Right Pane (Diff Viewer) ]                                                 |
| |-------------||------------------------------------------------------------------------------| |
| | [v] ASSOCIATED FILES            | | [ Back to Code View ]                                            | |
| | | ... (files list) ...          | |------------------------------------------------------------------| |
| |                                   | | [ Location Pane (visual file overview) ]                         | |
| | [v] THOUGHTS / RESPONSE           | |------------------------------------------------------------------| |
| | | ...                           | | [ Left Diff Pane ]<--->[ Right Diff Pane ]                       | |
| |                                   | | | (Scroll-locked)    | | (Scroll-locked)                     | | |
| | [v] COURSE OF ACTION              | | +--------------------||---------------------------------------+ | |
| | | ...                           | | [ Bottom Detail Pane (Original) ]                                | |
| |                                   | | [ Bottom Detail Pane (Response) ]                                | |
+-------------------------------------------------------------------------------------------------+
```
*   **`[ Back to Code View ]`:** A button to exit the diff mode and return to the single-file code viewer.
*   **Location Pane:** A new (future) component that provides a high-level, vertical map of the differences in the entire file, similar to WinMerge.

## 3. User Interaction Flow

1.  **Paste & Parse:** User pastes responses and clicks "Parse All".
2.  **Select for Replacement:**
    *   The user reviews "Resp 1". They decide they want most of it.
    *   They click the **"Select this response"** checkbox. All files in the "Associated Files" list become checked.
    *   They see one file, `config.ts`, that they don't want to change. They uncheck the box next to `config.ts`.
3.  **Accept Bulk Changes:** The user clicks the **"Accept Selected Files"** button. The extension overwrites the content of all checked workspace files with the content from "Resp 1".
4.  **View Individual Diff:**
    *   The user switches to "Resp 2" and selects `view.tsx` in the "Associated Files" list.
    *   They click **"View Diff"**. The right pane changes to the diff view.
5.  **Keyboard Navigation in Diff:**
    *   The user presses the **Down Arrow** key to jump to the first difference.
    *   They like the change, so they press the **Right Arrow** key. The change is visually applied in the right-hand (original) pane.
    *   They navigate to the next difference and repeat the process.
6.  **Exit Diff:** The user clicks **"Back to Code View"** to return to the normal code viewer.