# Artifact A35: DCE - Phase 2 - UI Mockups and Flow
# Date Created: C69
# Author: AI Model
# Updated on: C95 (Change parsed view to a two-pane layout with diff viewer)

## 1. Overview

This document describes the user interface (UI) and interaction flow for the Parallel Co-Pilot Panel. The design is centered around a two-stage workflow: **Input**, followed by a global **Parse** that transforms the entire panel into a **Review & Act** mode.

## 2. UI Mockup (Textual Description)

### 2.1. Stage 1: Raw Input View

This is the initial state of the panel. It remains unchanged.

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: [ Generate prompt.md ], [ Parse All ], Settings]      |
|-------------------------------------------------------------------------------------|
| [v] Cycle Info & Context                                                            |
| |-----------------------------------------------------------------------------------|
| | Cycle: [ < ] [ C95 ] [ > ] [ + (disabled) ] [ Cycle Title Input: ... ]             |
| |-----------------------------------------------------------------------------------|
| | [Cycle Context (Permanent notes)]          [Ephemeral Context (Temp logs)]        |
| | +----------------------------------------+ +------------------------------------+ |
| | | Multi-line text area...                | | Multi-line text area...            | |
| | +----------------------------------------+ +------------------------------------+ |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space ]                      |
| |                                                                                 | |
| | +-----------------------------------------------------------------------------+ | |
| | | <textarea>                                                                  | | |
| | | ...                                                                         | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.2. Stage 2: Parsed View (C95 Update)

After clicking `[ Parse All ]`, all tabs transform simultaneously into a **two-pane layout**. The left pane shows the summary and file list, while the right pane shows the diff viewer or file content.

```
+-------------------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: [ Generate prompt.md ], [ Un-Parse All ], Settings]               |
|-------------------------------------------------------------------------------------------------|
| ... (Cycle Info & Context section remains the same) ...                                         |
|-------------------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                                     |
|-------------------------------------------------------------------------------------------------|
| [ Left Pane (File List & Summary) ] | [ Right Pane (Diff Viewer / Content) ]                    |
| |-----------------------------------| |-------------------------------------------------------| |
| | [v] SUMMARY & PLAN                | | [ Diff for: src/client/views/view.tsx ]               | |
| | | Rendered Markdown...            | | +---------------------------------------------------+ | |
| |                                   | | | [ DiffViewer Component showing changes... ]       | | |
| | [v] ASSOCIATED FILES (Clickable)  | | +---------------------------------------------------+ | |
| | |-------------------------------| |                                                       | |
| | | [✓] src/client/views/view.tsx | | [ FILE: src/client/views/view.tsx ] [Swap]            | |
| | | [✗] src/client/new-file.ts    | | +---------------------------------------------------+ | |
| |                                   | | | [ Read-only, syntax-highlighted code viewer... ]  | | |
| |                                   | | +---------------------------------------------------+ | |
| |                                   | |                                                       | |
+-------------------------------------------------------------------------------------------------+
```

### 2.3. UI Components Breakdown

1.  **Main Toolbar:**
    *   Unchanged.

2.  **Cycle Navigator:**
    *   Unchanged.

3.  **Parsed View Layout:**
    *   The content area for a parsed tab is now a two-column layout.
    *   **Left Pane:** Contains the collapsible sections for "Summary & Plan," "Course of Action," and the "Associated Files" list. This pane is scrollable.
    *   **Right Pane:** This is the content viewer. It is initially empty or shows a placeholder. When a user clicks a file in the "Associated Files" list, this pane will render the appropriate content (a diff view or the full file content).

## 3. User Interaction Flow

1.  **Load & Parse:** User loads the panel and clicks "Parse All". The UI transforms into the two-pane layout. The right pane is empty.
2.  **Select for Diff:** The user clicks on a file with a `✓` in the "Associated Files" list (left pane).
    *   **Action:** The frontend sends a `RequestFileContent` message to the backend with the file's path.
    *   The backend reads the file from the workspace and sends its content back via `SendFileContent`.
    *   The frontend receives the original content. It already has the AI's proposed content from the parsed response.
    *   **UI Update:** The `DiffViewer` component is rendered in the **right pane**, showing a comparison of the two versions.
3.  **View Full Content:** The user clicks a file block header in the right pane.
    *   **UI Update:** The right pane switches from the `DiffViewer` to showing the full, syntax-highlighted content of that single file.