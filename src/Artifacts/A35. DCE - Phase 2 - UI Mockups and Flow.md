# Artifact A35: DCE - Phase 2 - UI Mockups and Flow
# Date Created: C69
# Author: AI Model
# Updated on: C90 (Add collapsible sections and specify markdown rendering)

## 1. Overview

This document describes the user interface (UI) and interaction flow for the Parallel Co-Pilot Panel. The design is now centered around a two-stage workflow: **Input & Parse**, followed by **Review & Act**. The UI transforms from a simple text input to a structured, read-only view to support this workflow, with collapsible sections for better layout management.

## 2. UI Mockup (Textual Description)

### 2.1. Stage 1: Raw Input View

This is the initial state of a tab, or the state before the "Parse" button is clicked.

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: Generate Prompt, Settings, etc.]                      |
|-------------------------------------------------------------------------------------|
| [v] Cycle Info & Context                                                            |
| |-----------------------------------------------------------------------------------|
| | Cycle: [ < ] [ C88 ] [ > ]  [ Cycle Title Input: fix ts error, continue... ]      |
| |-----------------------------------------------------------------------------------|
| | [Cycle Context (Permanent notes)]          [Ephemeral Context (Temp logs)]        |
| | +----------------------------------------+ +------------------------------------+ |
| | | Multi-line text area...                | | Multi-line text area...            | |
| | +----------------------------------------+ +------------------------------------+ |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Toolbar: [ Parse Response ] ]                                                     |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space ]                      |
| |                                                                                 | |
| | +-----------------------------------------------------------------------------+ | |
| | | <textarea>                                                                  | | |
| | | I've analyzed the request...                                                | | |
| | |                                                                             | | |
| | | ### Course of Action                                                        | | |
| | | ...                                                                         | | |
| | | <src/main.ts>...</main.ts>                                                  | | |
| | |                                                                             | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.2. Stage 2: Parsed View

```
+-------------------------------------------------------------------------------------+
| [Parallel Co-Pilot] [Toolbar: Generate Prompt, Settings, etc.]                      |
|-------------------------------------------------------------------------------------|
| [v] CYCLE & CONTEXT                                                                 |
| |---------------------------------------------------------------------------------| |
| | Cycle: [ < ] [ C90 ] [ > ]  [ Cycle Title Input: markdown rendering... ]        | |
| |---------------------------------------------------------------------------------| |
| | [Cycle Context (Permanent notes)]      [Ephemeral Context (Temp logs)]          | |
| | +--------------------------------------+ +------------------------------------+ | |
| | | Multi-line text area...              | | Multi-line text area...            | | |
| | +--------------------------------------+ +------------------------------------+ | |
|-------------------------------------------------------------------------------------|
| [ Response 1 (active) ] [ Response 2 ] [ Response 3 ] [ + ]                         |
|-------------------------------------------------------------------------------------|
| [ Toolbar: [ Un-Parse ] [METADATA] Tokens: 8.1K | Files: 3 (3 matched âœ“) ]          |
|-------------------------------------------------------------------------------------|
| [ Response 1 Content Area - Stretches to fill vertical space, scrollable ]          |
| |                                                                                 | |
| | [v] SUMMARY & PLAN                                                              | |
| | |-----------------------------------------------------------------------------| | |
| | | > I've analyzed your feedback...                                            | | |
| | | > The next steps are to implement **markdown rendering**.                   | | |
| |                                                                                 | |
| | [v] COURSE OF ACTION                                                            | |
| | |-----------------------------------------------------------------------------| | |
| | | 1.  **Documentation First:** I will update the artifacts.                   | | |
| | | 2.  **Implement UI:** I will add collapsible sections.                      | | |
| |                                                                                 | |
| | [ FILE: src/main.ts ] [Diff] [Swap]                                             | |
| | +-----------------------------------------------------------------------------+ | |
| | | [ Read-only, syntax-highlighted code viewer for main.ts ]                   | | |
| | +-----------------------------------------------------------------------------+ | |
| |                                                                                 | |
+-------------------------------------------------------------------------------------+
```

### 2.1. UI Components Breakdown

1.  **Collapsible Sections:**
    *   The main UI is now organized into collapsible "accordion" sections.
    *   **`[v] CYCLE & CONTEXT`**: This section contains the Cycle Navigator and the two context `textarea` fields. Clicking the header toggles its visibility.
    *   **`[v] SUMMARY & PLAN`**: In the parsed view, this section contains the AI's high-level summary. It is also collapsible.
    *   **`[v] COURSE OF ACTION`**: Contains the AI's course of action, also collapsible.
    *   Each header shows a chevron (`v` or `>`) to indicate its expanded or collapsed state.

2.  **Markdown Content Rendering:**
    *   The content within the "Summary & Plan" and "Course of Action" sections is no longer plain text.
    *   It is rendered as rich markdown, correctly displaying formatting such as **bold text**, `inline code`, bulleted lists (`*` or `-`), and numbered lists (`1.`).

3.  **File Blocks:**
    *   Each file block remains distinct.
    *   The code content within each block is rendered with full, theme-aware syntax highlighting.

## 3. User Interaction Flow

1.  **Paste & Parse:** The user pastes a raw AI response and clicks `[ Parse Response ]`. The UI transforms into the structured view.
2.  **Layout Management:** The user can now click the headers for "CYCLE & CONTEXT", "SUMMARY & PLAN", etc., to collapse any sections they don't currently need, allowing them to focus on the file blocks or the plan itself.
3.  **Review:** The user reviews the formatted summary and course of action, which are now much easier to read with proper markdown rendering.
4.  **Act:** The user can scroll down to the file blocks to review the syntax-highlighted code and use the `[Diff]` or `[Swap]` actions.