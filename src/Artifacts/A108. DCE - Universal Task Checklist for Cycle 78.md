# Artifact A108: DCE - Universal Task Checklist for Cycle 78
# Date Created: C78
# Author: AI Model & Curator

## 1. Purpose

This artifact provides a structured checklist for tracking the development tasks, feedback, and bugs identified in Cycle 78. The primary focus is to fix the regeneration UI bugs, implement the "Stop" button, and add the double-click confirmation for regeneration.

---

## Task List for Cycle 78+

## T-1: Implement Per-Response Status and UI Logic
- **Files Involved:**
    - `src/common/types/pcpp.types.ts`
    - `src/backend/services/history.service.ts`
    - `src/client/views/parallel-copilot.view/view.tsx`
- **Total Tokens:** ~14,800
- **More than one cycle?** No
- **Status:** To Do

- [ ] **Task (T-ID: 1.1):** Add a `status` field to the `PcppResponse` interface in `pcpp.types.ts`.
- [ ] **Task (T-ID: 1.2):** Update `history.service.ts` to set the individual response `status` to `'generating'` when a single regeneration is requested.
- [ ] **Task (T-ID: 1.3):** Refactor the main render logic in `view.tsx`. The choice to render `GenerationProgressDisplay` vs. `ResponsePane` should be based on the `status` of the `activeTab`'s response data, not just the overall cycle status.

### Verification Steps
1.  Generate a batch of responses.
2.  Regenerate "Resp 1".
3.  While "Resp 1" is regenerating, click on the "Resp 4" tab.
4.  **Expected:** The UI should show the content of "Resp 4". It should NOT show the progress UI.
5.  Click back to the "Resp 1" tab.
6.  **Expected:** The UI should now show the `GenerationProgressDisplay` for "Resp 1".

## T-2: Implement Regeneration Confirmation and Stop Button
- **Files Involved:**
    - `src/client/views/parallel-copilot.view/components/ResponseTabs.tsx`
    - `src/backend/services/llm.service.ts`
    - `src/client/views/parallel-copilot.view/on-message.ts`
- **Total Tokens:** ~6,200
- **More than one cycle?** No
- **Status:** To Do

- [ ] **Task (T-ID: 2.1):** Implement the double-click confirmation logic in `ResponseTabs.tsx` using local state to track the confirmation step.
- [ ] **Task (T-ID: 2.2):** Implement the `AbortController` logic in `llm.service.ts` to make the "Stop" button functional.
- [ ] **Task (T-ID: 2.3):** Wire up the "Stop" button in the UI to the backend service via a new IPC channel.

### Verification Steps
1.  Hover over a response tab and click the "Regenerate" icon once.
2.  **Expected:** The icon changes to a checkmark.
3.  Click it again.
4.  **Expected:** The regeneration process starts.
5.  Start a new generation and click the "Stop" button.
6.  **Expected:** The vLLM logs should show the request was cancelled, and the UI should stop receiving progress updates.