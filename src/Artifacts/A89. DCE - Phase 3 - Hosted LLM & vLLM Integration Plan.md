# Artifact A89: DCE - Phase 3 - Hosted LLM & vLLM Integration Plan
# Date Created: C29
# Author: AI Model & Curator
# Updated on: C45 (Add guidance for "Model not found" error)

- **Key/Value for A0:**
- **Description:** Outlines the architecture and roadmap for integrating the DCE extension with a remote, high-throughput vLLM backend via a secure proxy server.
- **Tags:** feature plan, phase 3, llm, vllm, inference, performance, architecture, proxy

## 1. Vision & Goal
(No change)

## 2. Proposed Architecture
(No change)

## 3. Security & Encryption
(No change)

## 4. User Stories
(No change)

## 5. Troubleshooting Connectivity

(No change to Step 1: Test the Proxy Server from Your Laptop)

### Step 2: Interpret the Results

-   **(No change to `ETIMEDOUT` or `5xx` error sections)**

-   **If `curl` returns a `404 Not Found` error from the *Proxy Server* (e.g., response body is `Cannot POST /api/dce/proxy`):** This means you have successfully connected to the proxy server, but the server's application logic (in `server.ts`) doesn't have a route defined for `/api/dce/proxy`.
    -   **Solution:** Check your `server.ts` file and ensure the route is correct. After making changes, you **must restart** the Node.js server process.

-   **If `curl` returns a `404 Not Found` error from the *vLLM Server* (e.g., response body contains `{"error":{"message":"The model ... does not exist."}}`):** This is a different, more specific error. It means the proxy successfully forwarded your request, but the vLLM server rejected it.
    -   **Root Cause:** The `model` parameter in the JSON request body does not match the model identifier that the vLLM server was started with.
    -   **Solution:**
        1.  Check your vLLM startup command (see `A92`) and copy the exact model name (e.g., `unsloth/mistral-7b-instruct-v0.2-bnb-4bit`).
        2.  Open your proxy's `server.ts` file.
        3.  Find the `fetch` call to the vLLM endpoint.
        4.  Change the value of the `model` field in the JSON `body` to be the exact name you copied.
        5.  **Restart your proxy server.**

-   **(No change to "If `curl` succeeds" section)**

## 6. Technical Implementation Plan
(No change)