# Artifact A14: DCE - Ongoing Development Issues
# Date Created: C20
# Author: AI Model & Curator

- **Key/Value for A0:**
- **Description:** A tracking document for recurring or persistent issues that need to be monitored across development cycles until they are confirmed as resolved.
- **Tags:** bugs, tracking, issues, logging, node_modules, performance

## 1. Purpose

This artifact serves as a centralized list to track ongoing and recurring issues during the development of the Data Curation Environment (DCE) extension. This ensures that persistent problems are not forgotten and are actively monitored across cycles until a definitive solution is implemented and verified.

## 2. Active Issues

---

### Issue #1: Logging Visibility

-   **Symptom:** The custom "Data Curation Environment" output channel is not visible in the "OUTPUT" tab's dropdown menu in the Extension Development Host window. This prevents the primary logging mechanism from being used for debugging.
-   **First Reported:** Cycle 19
-   **Status (C20):** **Active.** The issue persists. The root cause is likely an error during extension activation that prevents the `LoggerService` or the `vscode.window.createOutputChannel` call from executing successfully.
-   **Next Steps (C20):** Add robust `try...catch` blocks with `console.error` logging (which appears in the **Debug Console**) around the service initialization in `extension.ts` to identify the point of failure.

---

### Issue #2: `node_modules` Exclusion and Performance

-   **Symptom:** The `node_modules` directory is included in file tree scans, leading to incorrect file and token counts and a significant performance delay ("Loading file tree..." takes a long time).
-   **First Reported:** Cycle 15 (and earlier)
-   **Status (C20):** **Active.** The exclusion pattern provided to `vscode.workspace.findFiles` in `fs.service.ts` has been ineffective so far.
-   **Next Steps (C20):** Refine the glob pattern to be more explicit (`'{**/node_modules/**, ...}'`) and add logging to the `fs.service.ts` to verify the list of files *after* the exclusion is applied to confirm if the issue is with the `findFiles` call itself or subsequent processing. Also, explicitly exclude the generated `flattened_repo.md` file.

---

### Issue #3: Incorrect Image Token Counting

-   **Symptom:** Image files (e.g., `.png`, `.jpg`) are being assigned a token count based on their file size, rather than being treated as having zero tokens. They should display their file size (e.g., "15 KB") instead of a token count.
-   **First Reported:** Cycle 18
-   **Status (C20):** **Active.** The logic in `fs.service.ts` to identify image files and set their `tokenCount` to 0 is not working as intended, or the frontend is not correctly interpreting the `isImage` flag.
-   **Next Steps (C20):** Add logging to the `getFileStats` method in `fs.service.ts` to trace how image files are processed. Review the rendering logic in `FileTree.tsx` to ensure it correctly handles the `isImage` flag and displays the `sizeInBytes` instead of `tokenCount`.

---

### Issue #4: File Tree Caching and Refresh Behavior

-   **Symptom:** The file tree reloads from scratch every time the user switches away from and back to the extension's tab, causing a long "Loading..." delay. Additionally, the tree does not automatically update when files are created or deleted on the file system (e.g., after running "Flatten Context").
-   **First Reported:** Cycle 19
-   **Status (C20):** **Active.** The frontend lacks a caching mechanism, and the backend lacks a file system watcher to push updates.
-   **Next Steps (C20):**
    1.  **Frontend:** Change the `useEffect` dependency array in `view.tsx` to `[]` to fetch the tree only once on initial load.
    2.  **Backend:** Implement a `FileSystemWatcher` in `fs.service.ts` to detect changes, invalidate the server-side cache, and push a "force refresh" message to the client.
