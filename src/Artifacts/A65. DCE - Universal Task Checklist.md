# Artifact A65: DCE - Universal Task Checklist
# Date Created: C165
# Author: AI Model & Curator
# Updated on: C167 (Encourage cyclic updates)

- **Key/Value for A0:**
- **Description:** A universal checklist for organizing development tasks by file, focusing on complexity in terms of token count and estimated cycles for completion.
- **Tags:** process, checklist, task management, planning, workflow

## 1. Purpose

This artifact provides a structured, universal format for tracking development tasks, feedback, and bugs. Unlike cycle-specific trackers, this checklist organizes work by the group of files involved in a given task. It also introduces a simple complexity metric based on the total token count of the affected files and an estimation of whether the task will require more than one development cycle to complete.

This file-centric approach helps in planning and prioritizing work, especially in an AI-assisted development workflow where context size (token count) is a primary constraint.

## 2. How to Use

-   **Group by File Packages:** Create a new `##` section for each logical task or feature. List all the files that are expected to be modified for this task.
-   **Assign an ID:** Give each task package a unique, simple ID (e.g., `T-1`, `T-2`) for easy reference in feedback.
-   **Estimate Complexity:**
    -   Calculate the **Total Tokens** for all files in the package. This gives a quantitative measure of the context size.
    -   Estimate if the task is likely to take **More than one cycle?**. This is a qualitative judgment based on the complexity of the changes required.
-   **List Action Items:** Under each file package, create a checklist of specific actions, bugs to fix, or features to implement.
-   **Add Verification Steps:** After the action items, add a section describing how the curator should test the feature to confirm it is working as expected.
-   **Note on Output Length:** Remember that the maximum output length for a single response is approximately 65,000 tokens. Do not prematurely stop generating files; attempt to complete as many full files as possible within this limit.
-   **Keep it Current:** At the beginning of each new cycle, review and update this checklist. Move completed tasks to a "Completed" section, add new tasks based on feedback, and re-prioritize as needed. This ensures the checklist remains a living, accurate reflection of the project's status.

---

## Task List

## T-1: PCPP - No Workspace View
- **Files Involved:**
    - `src/backend/services/history.service.ts`
    - `src/client/views/parallel-copilot.view/view.tsx`
    - `src/common/ipc/channels.enum.ts`
    - `src/common/ipc/channels.type.ts`
    - `src/backend/services/file-operation.service.ts`
    - `src/client/views/parallel-copilot.view/on-message.ts`
    - `src/client/views/context-chooser.view/view.tsx`
- **Total Tokens:** ~25,000
- **More than one cycle?** No

- [ ] **Task (T-ID: 1.1):** Clicking the "Open Folder" button should trigger the native VS Code open folder dialog.
- [ ] **Task (T-ID: 1.2):** Add the same "No Folder Opened" UI to the Context Chooser panel.
- [ ] **Task (T-ID: 1.3):** Ensure the "Open Folder" buttons in both views use the same primary button style as "Flatten Context".

### Verification Steps
1.  Close any open workspace in the VS Code Extension Development Host (`File > Close Folder`).
2.  Open the Parallel Co-Pilot Panel.
3.  **Expected:** The panel should display a "No Folder Opened" message and an "Open Folder" button.
4.  Click the "Open Folder" button.
5.  **Expected:** The native VS Code "Open Folder" dialog should appear.
6.  Close the dialog and open the Data Curation (Context Chooser) panel.
7.  **Expected:** This panel should also display the "No Folder Opened" message and button.
8.  Click the button and open a folder.
9.  **Expected:** Both panels should now load their respective UIs for the opened workspace.

## T-2: Prompt Generation
- **Files Involved:**
    - `src/backend/services/prompt.service.ts`
- **Total Tokens:** ~4,000
- **More than one cycle?** No

- [ ] **Bug Fix (T-ID: 2.1):** The `<M5. organized artifacts list>` section should be populated from the user's workspace `A0*.md` file, not the extension's internal one.
- [ ] **Bug Fix (T-ID: 2.2):** The `<M6. Cycles>` block must be generated with cycles in descending order (newest first).

### Verification Steps
1.  In a test project with a custom-named A0 file (e.g., `MyProject-A0-Master-List.md`), navigate to the latest cycle in the PCPP.
2.  Click "Generate prompt.md".
3.  **Expected:** Open the `prompt.md` file. The `<M5>` section should contain the content of `MyProject-A0-Master-List.md`. The `<M6>` section should show the highest cycle number first.

## T-3: File Flattening
- **Files Involved:**
    - `src/backend/services/file-tree.service.ts`
    - `src/backend/services/flattener.service.ts`
- **Total Tokens:** ~6,500
- **More than one cycle?** No

- [ ] **Bug Fix (T-ID: 3.1):** `package-lock.json` must be excluded from the flattened output, even if its parent directory is checked.

### Verification Steps
1.  Open the Context Chooser panel.
2.  **Expected:** The `package-lock.json` file should have a disabled checkbox.
3.  Check the root directory of the project.
4.  Click "Flatten Context".
5.  **Expected:** Open the `flattened_repo.md` file. The `package-lock.json` file and its content should NOT be present.