# Artifact A85: DCE - Phase 3 - Model Cards Feature Plan
# Date Created: C17
# Author: AI Model & Curator

- **Key/Value for A0:**
- **Description:** A plan for a feature allowing users to create and manage "model cards" to easily switch between different local or remote LLM configurations.
- **Tags:** feature plan, settings, ui, ux, llm, configuration, phase 3

## 1. Overview & Goal

As the DCE project moves towards deeper AI integration (Phase 3), users will need a flexible way to manage connections to different Large Language Models (LLMs). A single text field for a local API is insufficient for users who may want to switch between different local models (e.g., a coding model vs. a writing model) or connect to various remote APIs.

The goal of this feature is to create a "Model Card" system within the DCE Settings Panel. This will allow users to create, save, and select from multiple configurations, making it easy to switch between different AI backends.

## 2. User Stories

| ID | User Story | Acceptance Criteria |
|---|---|---|
| P3-MC-01 | **Create a Model Card** | As a user, I want to create a new "model card" where I can input all the necessary information to connect to an LLM, so I can configure different models for different tasks. | - A "New Model Card" button exists in the Settings Panel. <br> - Clicking it opens a form with fields for: Display Name, API Endpoint URL, API Key (optional), and Context Window Size (tokens). <br> - A "Save" button persists this card. |
| P3-MC-02 | **Manage Model Cards** | As a user, I want to see a list of my saved model cards and be able to edit or delete them, so I can manage my configurations. | - The Settings Panel displays a list of all saved model cards. <br> - Each card in the list has "Edit" and "Delete" buttons. |
| P3-MC-03 | **Select Active Model** | As a user, I want to select one of my model cards as the "active" model, so the extension knows which LLM to use for its API calls. | - Each model card in the list has a "Select" or "Activate" button (or a radio button). <br> - A default, non-deletable "AI Studio" (manual mode) card is always present. <br> - The currently active model is visually highlighted. |

## 3. Proposed UI/UX

The "Settings" section of the existing Settings Panel will be redesigned to accommodate this feature.

1.  **Main View:**
    *   A list of existing model cards will be displayed. Each entry will show the `Display Name` and part of the `Endpoint URL`.
    *   Each entry will have `Edit`, `Delete`, and `Select` buttons.
    *   A prominent "Add New Model Card" button will be at the bottom of the list.

2.  **Creation/Editing View:**
    *   Clicking "Add New" or "Edit" will either show a modal or navigate to a separate view within the panel.
    *   This view will contain a form with the following fields:
        *   **Display Name:** (e.g., "Local Llama3-70B", "OpenAI GPT-4o")
        *   **API Endpoint URL:** The full URL for the API.
        *   **API Key:** (Optional) A password field for the API key.
        *   **Context Window Size:** A number input for the model's context window in tokens. This is crucial for future calculations and prompt management.
    *   "Save" and "Cancel" buttons will be present.

## 4. Technical Implementation Plan (High-Level)

1.  **Data Storage:**
    *   Model card configurations will be stored in the VS Code `workspaceState` or global state under a dedicated key (e.g., `dce.modelCards`).
    *   API keys will be stored securely using the `SecretStorage` API, keyed by a unique ID associated with each model card.

2.  **Backend (`settings.service.ts` - New or Existing):**
    *   A new service, or an expansion of an existing one, will be needed to manage the CRUD (Create, Read, Update, Delete) operations for model cards.
    *   It will handle the logic for reading/writing from `workspaceState` and `SecretStorage`.

3.  **Frontend (`settings.view.tsx`):**
    *   The settings view will be refactored into a more complex React component that manages the state for the list of cards and the editing form.
    *   It will use new IPC channels to communicate with the backend service to perform the CRUD operations.